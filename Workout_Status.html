<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Workout Routine" />
    <meta name="keywords" content="HTML, CSS, JavaScript" />
    <meta name="author" content="Kwak Junyoung" />

    <link rel="stylesheet" href="styles.css" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Do+Hyeon&display=swap"
      rel="stylesheet"
    />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid">
        <a class="navbar-brand" href="#" id="Title" style="margin: auto"
          >Fitness Helper</a
        >
      </div>
    </nav>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="threeButtons">
        <a href="MainEnter.html"
          ><button type="button" class="btn btn-info">Main</button></a
        >
        <a href="Workout_Status.html"
          ><button type="button" class="btn btn-info">
            Personal Routine
          </button></a
        >
        <a href="Playlist.html"
          ><button type="button" class="btn btn-info">Playlist</button></a
        >
      </div>
    </nav>
  </head>
  <body>
    <div class="container">
      <div class="calendarPane">
        <!-- Calendar Storage-->

        <div class="month">
          <ul>
            <li class="next">&#10095;</li>
            <li class="prev">&#10094;</li>
            <li>November<br /><span style="font-size: 18px">2021</span></li>
          </ul>

          <table style="margin: auto">
            <tr>
              <td id="sunday" class="weekNames">SUN</td>
              <td id="monday" class="weekNames">MON</td>
              <td id="tuesday" class="weekNames">TUE</td>
              <td id="wednesday" class="weekNames">WED</td>
              <td id="thursday" class="weekNames">THU</td>
              <td id="friday" class="weekNames">FRI</td>
              <td id="saturday" class="weekNames">SAT</td>
            </tr>
            <tr>
              <td class="pixel">.</td>
              <td id="2021-11-01" class="pixel">1</td>
              <td id="2021-11-02" class="pixel">2</td>
              <td id="2021-11-03" class="pixel">3</td>
              <td id="2021-11-04" class="pixel">4</td>
              <td id="2021-11-05" class="pixel">5</td>
              <td id="2021-11-06" class="pixel">6</td>
            </tr>
            <tr>
              <td id="2021-11-07" class="pixel">7</td>
              <td id="2021-11-08" class="pixel">8</td>
              <td id="2021-11-09" class="pixel">9</td>
              <td id="2021-11-10" class="pixel">10</td>
              <td id="2021-11-11" class="pixel">11</td>
              <td id="2021-11-12" class="pixel">12</td>
              <td id="2021-11-13" class="pixel">13</td>
            </tr>
            <tr>
              <td id="2021-11-14" class="pixel">14</td>
              <td id="2021-11-15" class="pixel">15</td>
              <td id="2021-11-16" class="pixel">16</td>
              <td id="2021-11-17" class="pixel">17</td>
              <td id="2021-11-18" class="pixel">18</td>
              <td id="2021-11-19" class="pixel">19</td>
              <td id="2021-11-20" class="pixel">20</td>
            </tr>
            <tr>
              <td id="2021-11-21" class="pixel">21</td>
              <td id="2021-11-22" class="pixel">22</td>
              <td id="2021-11-23" class="pixel">23</td>
              <td id="2021-11-24" class="pixel">24</td>
              <td id="2021-11-25" class="pixel">25</td>
              <td id="2021-11-26" class="pixel">26</td>
              <td id="2021-11-27" class="pixel">27</td>
            </tr>
            <tr>
              <td id="2021-11-28" class="pixel">28</td>
              <td id="2021-11-29" class="pixel">29</td>
              <td id="2021-11-30" class="pixel">30</td>
              <td class="pixel">.</td>
              <td class="pixel">.</td>
              <td class="pixel">.</td>
              <td class="pixel">.</td>
            </tr>
          </table>
        </div>
      </div>

      <div class="midpane" id="midpane" style="display: block">
        <div class="d-flex flex-column">
          <div id="selected_date"></div>
          <div
            class="memo"
            contenteditable="true"
            placeholder="memo"
            id="memonote"
          ></div>
          <input
            type="button"
            class="addB"
            value="식단 추가"
            onclick="diet();"
            id="addDietButton"
          />
          <input
            type="button"
            class="addB"
            value="운동 추가"
            onclick="onDisplayWorkout();"
            id="addWorkoutButton"
          />
        </div>
      </div>
      <div class="restpane" id="clickshow" style="display: none">

        <div id="selected_date_workout"></div>

        <div class="training">
          <p>운동 이름</p>
          <label for="what_train">
            <input type="text"
            id="what_train_name"
            name="what_train"
            placeholder="운동이름입력"
            size="15"/></label>
        </div>

        <div class="training">
          <p>운동 구분</p>
          <label for="what_train"><input
            type="checkbox"
            id="what_train1_1"
            name="what_train"
            value="웨이트트레이닝"/>웨이트 트레이닝</label>

          <label for="what_train"><input
            type="checkbox"
            id= "what_train1_2"
            name="what_train"
            value="유산소"            
          />유산소</label>

        </div>
        <div class="training">
          <p>운동 상세 부위</p>
          <div>
            <input
              type="checkbox"
              id= "what_train2_1"
              name="what_train"
              value="등"
            />등

            <input
              type="checkbox"
              id= "what_train2_2"
              name="what_train"
              value="가슴"/>가슴
            <input
              type="checkbox"
              id= "what_train2_3"
              name="what_train"
              value="어깨"/>어깨

            <input
              type="checkbox"
              id= "what_train2_4"
              name="what_train"
              value="하체"
            />하체

            <div>
              <input
                type="checkbox"
                id= "what_train2_5"
                name="what_train"
                value="이두"
              />이두
              <input
                type="checkbox"
                id= "what_train2_6"
                name="what_train"
                value="삼두"
              />삼두
              <input
                type="checkbox"
                id= "what_train2_7"
                name="what_train"
                value="힙"
              />힙
              <input
                type="checkbox"
                id= "what_train2_8"
                name="what_train"
                value="승모"
              />승모

              <input
                type="checkbox"
                id= "what_train2_9"
                name="what_train"
                value="복근"
              />복근

            </div>
          </div>
        </div>
        <div class="training half">
          <p>운동횟수</p>
          <input
            type="number"
            id= "train_num"
            name="what_train"
            placeholder="횟수입력"
            size="8"
            style="width: 100px"
            value="0"

          />
        </div>
        <div class="training half">
          <p>운동무게</p>
          <input
            type="number"
            id= "train_weight"
            name="what_train"
            placeholder="무게입력"
            size="8"
            style="width: 100px"
            value="0"
          />
        </div>

        <input
          type="button"
          class="addB"
          value="운동추가하기"
          onclick="ReturnNormal();"
          id="addingWorkout"
        />
      </div>
      <div class="restpane" id="restpane1" style="display: none">
        <div id="selected_date_diet"></div>
        <p class="threepane">
          <span class="highlight">- 아침</span>
        </p>
        <p class="threepane">
          <span class="highlight">- 점심</span>
        </p>
        <p class="threepane">
          <span class="highlight">- 저녁</span>
        </p>
        <p id="breakfastMenu"></p>
        <div class="under">
          <div class="under-1">
            <input
              type="button"
              class="addB"
              value="뒤로가기"
              onclick="ReturnNormal();"
              id="return_back"
            />
          </div>
          <div class="under-1">
            <input
              type="button"
              class="addB"
              value="여기에 추가하기"
              onclick="showdietinsert();"
              id="add_diet"
            />
          </div>
        </div>
      </div>
      <div class="restpane" id="restpane2" style="display: none">
        <div id="addMenu" style="display: block">
          <div class="smallbox">
            <div>메뉴 추가</div>
            <div id="add_diet_date"></div>
          </div>
          <div class="threepane">
            <label for="diet"
              ><input type="checkbox" name="diet" value="아침" /> 아침</label
            >
          </div>
          <div class="threepane">
            <label for="diet"
              ><input type="checkbox" name="diet" value="점심" /> 점심</label
            >
          </div>
          <div class="threepane">
            <label for="diet"
              ><input type="checkbox" name="diet" value="저녁" /> 저녁</label
            >
          </div>
          <div>
            <p>
              <label for="diet"
                >menu:
                <input
                  type="text"
                  name="diet"
                  placeholder="메뉴입력"
                  required
                  minlength="1"
                  minlength="40"
                  size="8"
                  style="width: 200px"
              /></label>
            </p>
          </div>
          <div>
            <p>
              <label for="diet"
                >weight:
                <input
                  type="number"
                  name="diet"
                  placeholder="무게입력"
                  size="8"
                  style="width: 100px"
                />
                g</label
              >
            </p>
            <button
              type="button"
              class="addB"
              style="float: right"
              id="addMenuButton"
              onclick="getDietInfo();returndiet();"
            >
              추가하기
            </button>
          </div>
        </div>
      </div>
      <div class="rightpane" id="rightpane" style="display: block">
        <div id= "train_goal">

        </div>
      </div>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <script type="text/javascript" src="addWorkout.js"></script>

    <script type="text/javascript" src="calendarLoad.js"></script>
    <script type="text/javascript" src="add_diet.js"></script>

    <script>
      let train=[];

      function LoadTasks(){
        let lastTasks= localStorage.getItem("train");
        if(!lastTasks) return;

        train= JSON.parse(lastTasks);

      }

      function SaveTasks(){
        localStorage.setItem("train", JSON.stringify(train));
      }

        document.querySelector("#addingWorkout").addEventListener("click", () => {
          LoadTasks();
          let train_d= {};
          let train_e= {
            "운동 이름": null,
            "운동 구분": null, 
            "상세 부위": null,
            "횟수": null,
            "무게": null,
          };

          //1. 운동 이름
          let f0= document.getElementById("what_train_name");
          console.log(f0.value);

          train_e["운동 이름"]= f0.value;

          //2. 운동 구분
          let f1= document.getElementById("what_train1_1");
          let f2= document.getElementById("what_train1_2");

          if(f1.checked){
            train_e["운동 구분"]= f1.value;
          } else {
            train_e["운동 구분"]= f2.value;
          }

          //3. 운동 상세 부위
          let part=[];
          let s1= document.getElementById("what_train2_1");
          if(s1.checked) part.push(s1.value);
          let s2= document.getElementById("what_train2_2");
          if(s2.checked) part.push(s2.value);
          let s3= document.getElementById("what_train2_3");
          if(s3.checked) part.push(s3.value);
          let s4= document.getElementById("what_train2_4");
          if(s4.checked) part.push(s4.value);
          let s5= document.getElementById("what_train2_5");
          if(s5.checked) part.push(s5.value);
          let s6= document.getElementById("what_train2_6");
          if(s6.checked) part.push(s6.value);
          let s7= document.getElementById("what_train2_7");
          if(s7.checked) part.push(s7.value);
          let s8= document.getElementById("what_train2_8");
          if(s8.checked) part.push(s8.value);
          let s9= document.getElementById("what_train2_9");
          if(s9.checked) part.push(s9.value);
          
          train_e["상세 부위"]= part;

          //4. 횟수
          let t_num= document.getElementById("train_num").value;
          train_e["횟수"]= t_num;
          
          //5. 운동 무게
          let t_weight= document.getElementById("train_weight").value;
          train_e["무게"]= t_weight;

          //6. 추가하기
          let num=train.length;
          var add=0;

          //1. 날짜 저장
          let ymd= document.getElementById("selected_date_workout").innerText;
          train_d[ymd]= [];          

          for(i=0; i< num; i++){
            if(ymd in train[i]){//같은 날짜가 있을 경우
              train[i][ymd].push(train_e);
              add=1;
              break;
            }
          }

          if(add===0){//같은 날짜가 없는 경우
            train_d[ymd].push(train_e);
            train.push(train_d);
          }

          SaveTasks();
          //localStorage.clear();
          
			  })
        
      

    </script>

  </body>
</html>